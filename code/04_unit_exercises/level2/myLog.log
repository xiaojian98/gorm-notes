PS F:\Study\GO\Gorm\gorm\gorm-note\code\04_unit_exercises\level2> go run . 
=== GORM Level 2 关联关系练习 ===

--- SQLite 数据库演示 ---

2025/08/16 11:12:54 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[0.000ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type='table' AND name="users"

2025/08/16 11:12:54 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.653ms] [rows:0] CREATE TABLE `users` (`id` integer PRIMARY KEY AUTOINCREMENT,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`username` text NOT NULL,`email` text NOT NULL,`password` text NOT NULL)

2025/08/16 11:12:54 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.200ms] [rows:0] CREATE UNIQUE INDEX `idx_users_email` ON `users`(`email`)

2025/08/16 11:12:54 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.712ms] [rows:0] CREATE UNIQUE INDEX `idx_users_username` ON `users`(`username`)

2025/08/16 11:12:54 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.652ms] [rows:0] CREATE INDEX `idx_users_deleted_at` ON `users`(`deleted_at`)

2025/08/16 11:12:54 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[0.000ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type='table' AND name="profiles"

2025/08/16 11:12:54 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.172ms] [rows:0] CREATE TABLE `profiles` (`id` integer PRIMARY KEY AUTOINCREMENT,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`user_id` integer NOT NULL,`first_name` text,`last_name` text,`bio` text,`avatar` text,`phone` text,`address` text,`birth_date` datetime,CONSTRAINT `fk_users_profile` FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE CASCADE ON UPDATE CASCADE)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.839ms] [rows:0] CREATE UNIQUE INDEX `idx_profiles_user_id` ON `profiles`(`user_id`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.655ms] [rows:0] CREATE INDEX `idx_profiles_deleted_at` ON `profiles`(`deleted_at`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[0.000ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type='table' AND name="categories"

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.382ms] [rows:0] CREATE TABLE `categories` (`id` integer PRIMARY KEY AUTOINCREMENT,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`name` text NOT NULL,`slug` text NOT NULL,`description` text,`is_active` numeric DEFAULT true)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.309ms] [rows:0] CREATE UNIQUE INDEX `idx_categories_slug` ON `categories`(`slug`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[4.808ms] [rows:0] CREATE INDEX `idx_categories_name` ON `categories`(`name`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[6.261ms] [rows:0] CREATE INDEX `idx_categories_deleted_at` ON `categories`(`deleted_at`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[0.000ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type='table' AND name="posts"

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[4.913ms] [rows:0] CREATE TABLE `posts` (`id` integer PRIMARY KEY AUTOINCREMENT,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`title` text NOT NULL,`slug` text NOT NULL,`content` text NOT NULL,`excerpt` text,`status` text DEFAULT "draft",`view_count` integer DEFAULT 0,`like_count` integer DEFAULT 0,`published_at` datetime,`author_id` integer NOT NULL,`category_id` integer,CONSTRAINT `fk_categories_posts` FOREIGN KEY (`category_id`) REFERENCES `categories`(`id`) ON DELETE SET NULL ON UPDATE CASCADE,CONSTRAINT `fk_posts_author` FOREIGN KEY (`author_id`) REFERENCES `users`(`id`))

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.766ms] [rows:0] CREATE INDEX `idx_posts_status` ON `posts`(`status`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.187ms] [rows:0] CREATE UNIQUE INDEX `idx_posts_slug` ON `posts`(`slug`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[4.714ms] [rows:0] CREATE INDEX `idx_posts_title` ON `posts`(`title`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.700ms] [rows:0] CREATE INDEX `idx_posts_deleted_at` ON `posts`(`deleted_at`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.743ms] [rows:0] CREATE INDEX `idx_posts_category_id` ON `posts`(`category_id`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.819ms] [rows:0] CREATE INDEX `idx_posts_author_id` ON `posts`(`author_id`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[4.641ms] [rows:0] CREATE INDEX `idx_posts_published_at` ON `posts`(`published_at`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[0.000ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type='table' AND name="tags"

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.148ms] [rows:0] CREATE TABLE `tags` (`id` integer PRIMARY KEY AUTOINCREMENT,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`name` text NOT NULL,`slug` text NOT NULL,`description` text,`color` text DEFAULT "#007bff",`is_active` numeric DEFAULT true)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.783ms] [rows:0] CREATE UNIQUE INDEX `idx_tags_slug` ON `tags`(`slug`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[4.781ms] [rows:0] CREATE UNIQUE INDEX `idx_tags_name` ON `tags`(`name`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.031ms] [rows:0] CREATE INDEX `idx_tags_deleted_at` ON `tags`(`deleted_at`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[0.000ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type='table' AND name="post_tags"

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.553ms] [rows:0] CREATE TABLE `post_tags` (`post_id` integer,`tag_id` integer,`created_at` datetime,PRIMARY KEY (`post_id`,`tag_id`),CONSTRAINT `fk_post_tags_post` FOREIGN KEY (`post_id`) REFERENCES `posts`(`id`),CONSTRAINT `fk_post_tags_tag` FOREIGN KEY (`tag_id`) REFERENCES `tags`(`id`))

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[0.000ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type='table' AND name="comments"

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.173ms] [rows:0] CREATE TABLE `comments` (`id` integer PRIMARY KEY AUTOINCREMENT,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`content` text NOT NULL,`status` text DEFAULT "pending",`ip_address` text,`post_id` integer NOT NULL,`author_id` integer NOT NULL,`parent_id` integer,CONSTRAINT `fk_comments_author` FOREIGN KEY (`author_id`) REFERENCES `users`(`id`),CONSTRAINT `fk_comments_replies` FOREIGN KEY (`parent_id`) REFERENCES `comments`(`id`),CONSTRAINT `fk_posts_comments` FOREIGN KEY (`post_id`) REFERENCES `posts`(`id`) ON DELETE CASCADE ON UPDATE CASCADE)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.718ms] [rows:0] CREATE INDEX `idx_comments_parent_id` ON `comments`(`parent_id`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[4.645ms] [rows:0] CREATE INDEX `idx_comments_author_id` ON `comments`(`author_id`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.637ms] [rows:0] CREATE INDEX `idx_comments_post_id` ON `comments`(`post_id`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.793ms] [rows:0] CREATE INDEX `idx_comments_status` ON `comments`(`status`)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:252
[5.709ms] [rows:0] CREATE INDEX `idx_comments_deleted_at` ON `comments`(`deleted_at`)
✓ SQLite数据库初始化完成

=== SQLite 关联关系演示 ===

=== 一对一关系练习 ===

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:369
[0.000ms] [rows:1] INSERT INTO `profiles` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`first_name`,`last_name`,`bio`,`avatar`,`phone`,`address`,`birth_date`) VALUES ("2025-08-16 11:12:55.146","2025-08-16 11:12:55.146",NULL,1,"Alice","Smith","我是Alice，一名开发者","","","",NULL) ON CONFLICT (`id`) DO UPDATE SET `user_id`=`excluded`.`user_id` RETURNING `id`  

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:369
[6.287ms] [rows:1] INSERT INTO `users` (`created_at`,`updated_at`,`deleted_at`,`username`,`email`,`password`) VALUES ("2025-08-16 11:12:55.144","2025-08-16 11:12:55.144",NULL,"alice","alice@example.com","password123") RETURNING `id`
创建用户及资料成功，用户ID: 1, 资料ID: 1

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:369
[0.000ms] [rows:1] INSERT INTO `profiles` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`first_name`,`last_name`,`bio`,`avatar`,`phone`,`address`,`birth_date`) VALUES ("2025-08-16 11:12:55.151","2025-08-16 11:12:55.151",NULL,2,"Bob","Johnson","我是Bob，喜欢写作","","","",NULL) ON CONFLICT (`id`) DO UPDATE SET `user_id`=`excluded`.`user_id` RETURNING `id`      

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:369
[5.718ms] [rows:1] INSERT INTO `users` (`created_at`,`updated_at`,`deleted_at`,`username`,`email`,`password`) VALUES ("2025-08-16 11:12:55.151","2025-08-16 11:12:55.151",NULL,"bob","bob@example.com","password456") RETURNING `id`
创建用户及资料成功，用户ID: 2, 资料ID: 2

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:393
[0.000ms] [rows:1] SELECT * FROM `profiles` WHERE `profiles`.`user_id` = 1 AND `profiles`.`deleted_at` IS NULL

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:393
[1.035ms] [rows:1] SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
用户: alice, 全名: Alice Smith

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:412
[5.174ms] [rows:1] UPDATE `profiles` SET `bio`="我是Alice，一名全栈开发者",`phone`="123-456-7890",`updated_at`="2025-08-16 11:12:55.157" WHERE user_id = 1 AND `profiles`.`deleted_at` IS NULL
更新用户资料成功，影响行数: 1

=== 一对多关系练习 ===

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:463
[0.518ms] [rows:3] INSERT INTO `posts` (`created_at`,`updated_at`,`deleted_at`,`title`,`slug`,`content`,`excerpt`,`status`,`view_count`,`like_count`,`published_at`,`author_id`,`category_id`) VALUES ("2025-08-16 11:12:55.164","2025-08-16 11:12:55.164",NULL,"Go语言入门","tech-1","这是Go语言入门的内容","这是Go语言入门的摘要","published",0,0,NULL,1,1),("2025-08-16 11:12:55.164","2025-08-16 11:12:55.164",NULL,"GORM使用指南","tech-2","这是GORM使用指南的内容","这是GORM使用指南的摘要","published",0,0,NULL,1,1),("2025-08-16 11:12:55.164","2025-08-16 11:12:55.164",NULL,"数据库设计原则","tech-3","这是数据库设计原则的内容","这是数据库设计原则的摘要","published",0,0,NULL,1,1) ON CONFLICT (`id`) DO UPDATE SET `category_id`=`excluded`.`category_id` RETURNING `id`

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:463
[6.638ms] [rows:1] INSERT INTO `categories` (`created_at`,`updated_at`,`deleted_at`,`name`,`slug`,`description`,`is_active`) VALUES ("2025-08-16 11:12:55.163","2025-08-16 11:12:55.163",NULL,"技术","tech","",true) RETURNING `id`
创建分类及文章成功，分类ID: 1, 文章数量: 3

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:487
[0.000ms] [rows:1] SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:487
[1.002ms] [rows:3] SELECT * FROM `posts` WHERE `posts`.`category_id` = 1 AND `posts`.`deleted_at` IS NULL

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:487
[1.002ms] [rows:1] SELECT * FROM `categories` WHERE `categories`.`id` = 1 AND `categories`.`deleted_at` IS NULL ORDER BY `categories`.`id` LIMIT 1
分类: 技术, 文章数量: 3
  - Go语言入门 (作者: alice)
  - GORM使用指南 (作者: alice)
  - 数据库设计原则 (作者: alice)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:556
[0.504ms] [rows:3] INSERT INTO `comments` (`created_at`,`updated_at`,`deleted_at`,`content`,`status`,`ip_address`,`post_id`,`author_id`,`parent_id`) VALUES ("2025-08-16 11:12:55.171","2025-08-16 11:12:55.171",NULL,"很有用的文章！","approved","",4,1,NULL),("2025-08-16 11:12:55.171","2025-08-16 11:12:55.171",NULL,"学到了很多","approved","",4,1,NULL),("2025-08-16 11:12:55.171","2025-08-16 11:12:55.171",NULL,"期待更多内容","approved","",4,1,NULL) ON CONFLICT (`id`) DO UPDATE SET `post_id`=`excluded`.`post_id` RETURNING `id`

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:556
[5.513ms] [rows:1] INSERT INTO `posts` (`created_at`,`updated_at`,`deleted_at`,`title`,`slug`,`content`,`excerpt`,`status`,`view_count`,`like_count`,`published_at`,`author_id`,`category_id`) VALUES ("2025-08-16 11:12:55.17","2025-08-16 11:12:55.17",NULL,"GORM高级用法","post-1755313975","这是一篇关于GORM高级用法的文章...","这是一篇关于GORM高级用法的文章...","published",0,0,NULL,1,1) RETURNING `id`
创建文章及评论成功，文章ID: 4, 评论数量: 3

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:579
[0.000ms] [rows:1] SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:579
[0.000ms] [rows:3] SELECT * FROM `comments` WHERE `comments`.`post_id` = 4 AND `comments`.`deleted_at` IS NULL

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:579
[0.000ms] [rows:1] SELECT * FROM `posts` WHERE `posts`.`id` = 4 AND `posts`.`deleted_at` IS NULL ORDER BY `posts`.`id` LIMIT 1
文章: GORM高级用法, 评论数量: 3

=== 多对多关系练习 ===

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:613
[6.021ms] [rows:4] INSERT INTO `tags` (`created_at`,`updated_at`,`deleted_at`,`name`,`slug`,`description`,`color`,`is_active`) VALUES ("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"Go","Go","","#007bff",true),("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"数据库","数据库","","#007bff",true),("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"后端","后端","","#007bff",true),("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"教程","教程","","#007bff",true) RETURNING `id`

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:623
[0.000ms] [rows:1] SELECT * FROM `posts` WHERE `posts`.`id` = 1 AND `posts`.`deleted_at` IS NULL ORDER BY `posts`.`id` LIMIT 1

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[0.000ms] [rows:0] INSERT INTO `tags` (`created_at`,`updated_at`,`deleted_at`,`name`,`slug`,`description`,`color`,`is_active`,`id`) VALUES ("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"Go","Go","","#007bff",true,1),("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"数据库","数据库","","#007bff",true,2),("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"后端","后端","","#007bff",true,3),("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"教程","教程","","#007bff",true,4) ON CONFLICT DO NOTHING RETURNING `id` 

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[0.000ms] [rows:4] INSERT INTO `post_tags` (`post_id`,`tag_id`) VALUES (1,1),(1,2),(1,3),(1,4) ON CONFLICT DO NOTHING

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[6.857ms] [rows:1] UPDATE `posts` SET `updated_at`="2025-08-16 11:12:55.184" WHERE `posts`.`deleted_at` IS NULL AND `id` = 1

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:623
[0.000ms] [rows:1] SELECT * FROM `posts` WHERE `posts`.`id` = 2 AND `posts`.`deleted_at` IS NULL ORDER BY `posts`.`id` LIMIT 1

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[0.000ms] [rows:0] INSERT INTO `tags` (`created_at`,`updated_at`,`deleted_at`,`name`,`slug`,`description`,`color`,`is_active`,`id`) VALUES ("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"Go","Go","","#007bff",true,1),("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"数据库","数据库","","#007bff",true,2),("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"后端","后端","","#007bff",true,3),("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"教程","教程","","#007bff",true,4) ON CONFLICT DO NOTHING RETURNING `id` 

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[0.000ms] [rows:4] INSERT INTO `post_tags` (`post_id`,`tag_id`) VALUES (2,1),(2,2),(2,3),(2,4) ON CONFLICT DO NOTHING

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[6.745ms] [rows:1] UPDATE `posts` SET `updated_at`="2025-08-16 11:12:55.191" WHERE `posts`.`deleted_at` IS NULL AND `id` = 2

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:623
[0.515ms] [rows:1] SELECT * FROM `posts` WHERE `posts`.`id` = 3 AND `posts`.`deleted_at` IS NULL ORDER BY `posts`.`id` LIMIT 1

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[0.513ms] [rows:0] INSERT INTO `tags` (`created_at`,`updated_at`,`deleted_at`,`name`,`slug`,`description`,`color`,`is_active`,`id`) VALUES ("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"Go","Go","","#007bff",true,1),("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"数据库","数据库","","#007bff",true,2),("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"后端","后端","","#007bff",true,3),("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"教程","教程","","#007bff",true,4) ON CONFLICT DO NOTHING RETURNING `id` 

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[0.000ms] [rows:4] INSERT INTO `post_tags` (`post_id`,`tag_id`) VALUES (3,1),(3,2),(3,3),(3,4) ON CONFLICT DO NOTHING

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[5.653ms] [rows:1] UPDATE `posts` SET `updated_at`="2025-08-16 11:12:55.198" WHERE `posts`.`deleted_at` IS NULL AND `id` = 3

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:623
[0.000ms] [rows:1] SELECT * FROM `posts` WHERE `posts`.`id` = 4 AND `posts`.`deleted_at` IS NULL ORDER BY `posts`.`id` LIMIT 1

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[0.000ms] [rows:0] INSERT INTO `tags` (`created_at`,`updated_at`,`deleted_at`,`name`,`slug`,`description`,`color`,`is_active`,`id`) VALUES ("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"Go","Go","","#007bff",true,1),("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"数据库","数据库","","#007bff",true,2),("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"后端","后端","","#007bff",true,3),("2025-08-16 11:12:55.177","2025-08-16 11:12:55.177",NULL,"教程","教程","","#007bff",true,4) ON CONFLICT DO NOTHING RETURNING `id` 

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[0.513ms] [rows:4] INSERT INTO `post_tags` (`post_id`,`tag_id`) VALUES (4,1),(4,2),(4,3),(4,4) ON CONFLICT DO NOTHING

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[5.183ms] [rows:1] UPDATE `posts` SET `updated_at`="2025-08-16 11:12:55.204" WHERE `posts`.`deleted_at` IS NULL AND `id` = 4
创建标签并分配成功，标签数量: 4

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:652
[0.000ms] [rows:4] SELECT * FROM `post_tags` WHERE `post_tags`.`post_id` = 1

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:652
[0.000ms] [rows:4] SELECT * FROM `tags` WHERE `tags`.`id` IN (1,2,3,4) AND `tags`.`deleted_at` IS NULL

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:652
[0.514ms] [rows:1] SELECT * FROM `posts` WHERE `posts`.`id` = 1 AND `posts`.`deleted_at` IS NULL ORDER BY `posts`.`id` LIMIT 1
文章: Go语言入门, 标签: Go, 数据库, 后端, 教程

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:672
[0.000ms] [rows:4] SELECT * FROM `post_tags` WHERE `post_tags`.`tag_id` = 1

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:672
[0.514ms] [rows:1] SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:672
[0.514ms] [rows:4] SELECT * FROM `posts` WHERE `posts`.`id` IN (1,2,3,4) AND `posts`.`deleted_at` IS NULL

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:672
[0.514ms] [rows:1] SELECT * FROM `tags` WHERE `tags`.`id` = 1 AND `tags`.`deleted_at` IS NULL ORDER BY `tags`.`id` LIMIT 1
标签: Go, 文章数量: 4

=== 复杂查询练习 ===

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:754
[0.000ms] [rows:1] SELECT * FROM `profiles` WHERE `profiles`.`user_id` = 1 AND `profiles`.`deleted_at` IS NULL

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:754
[0.000ms] [rows:1] SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:754
[0.520ms] [rows:1] SELECT * FROM `categories` WHERE `categories`.`id` = 1 AND `categories`.`deleted_at` IS NULL

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:754
[0.000ms] [rows:1] SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:754
[0.000ms] [rows:3] SELECT * FROM `comments` WHERE `comments`.`post_id` IN (1,2,3,4) AND `comments`.`deleted_at` IS NULL

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:754
[0.000ms] [rows:16] SELECT * FROM `post_tags` WHERE `post_tags`.`post_id` IN (1,2,3,4)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:754
[0.514ms] [rows:4] SELECT * FROM `tags` WHERE `tags`.`id` IN (1,2,3,4) AND `tags`.`deleted_at` IS NULL

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:754
[2.061ms] [rows:4] SELECT * FROM `posts` WHERE `posts`.`deleted_at` IS NULL LIMIT 5
获取到 4 篇文章（包含所有关联数据）

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:773
[0.000ms] [rows:1] SELECT * FROM `categories` WHERE `categories`.`id` = 1 AND `categories`.`deleted_at` IS NULL

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:773
[0.513ms] [rows:16] SELECT * FROM `post_tags` WHERE `post_tags`.`post_id` IN (1,2,3,4)

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:773
[0.000ms] [rows:4] SELECT * FROM `tags` WHERE `tags`.`id` IN (1,2,3,4) AND `tags`.`deleted_at` IS NULL

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:773
[0.513ms] [rows:4] SELECT * FROM `posts` WHERE author_id = 1 AND `posts`.`deleted_at` IS NULL
用户 alice 的文章统计:
  总文章数: 4
  总浏览数: 0
  总点赞数: 0
  分类分布: map[技术:4]
  标签分布: map[Go:4 后端:4 教程:4 数据库:4]

=== SQLite 关联关系演示完成 ===

--- MySQL 数据库演示 ---

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[5.264ms] [rows:-] SELECT DATABASE()

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[29.066ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'gorm_test%' ORDER BY SCHEMA_NAME='gorm_test' DESC,SCHEMA_NAME limit 1

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[8.728ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'gorm_test' AND table_name = 'users' AND table_type = 'BASE TABLE'

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324 SLOW SQL >= 200ms
[541.384ms] [rows:0] CREATE TABLE `users` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`username` varchar(50) NOT NULL,`email` varchar(100) NOT NULL,`password` varchar(255) NOT NULL,PRIMARY KEY (`id`),INDEX `idx_users_deleted_at` (`deleted_at`),UNIQUE INDEX `idx_users_username` (`username`),UNIQUE INDEX `idx_users_email` (`email`))

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[3.518ms] [rows:-] SELECT DATABASE()

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[9.209ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'gorm_test%' ORDER BY SCHEMA_NAME='gorm_test' DESC,SCHEMA_NAME limit 1

2025/08/16 11:12:55 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[8.655ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'gorm_test' AND table_name = 'profiles' AND table_type = 'BASE TABLE'

2025/08/16 11:12:56 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324 SLOW SQL >= 200ms
[275.290ms] [rows:0] CREATE TABLE `profiles` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`user_id` bigint unsigned NOT NULL,`first_name` varchar(50),`last_name` varchar(50),`bio` text,`avatar` varchar(255),`phone` varchar(20),`address` varchar(255),`birth_date` datetime(3) NULL,PRIMARY KEY (`id`),INDEX `idx_profiles_deleted_at` (`deleted_at`),UNIQUE INDEX `idx_profiles_user_id` (`user_id`),CONSTRAINT `fk_users_profile` FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE CASCADE ON UPDATE CASCADE)

2025/08/16 11:12:56 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[2.004ms] [rows:-] SELECT DATABASE()

2025/08/16 11:12:56 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[6.854ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'gorm_test%' ORDER BY SCHEMA_NAME='gorm_test' DESC,SCHEMA_NAME limit 1

2025/08/16 11:12:56 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[10.873ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'gorm_test' AND table_name = 'categories' AND table_type = 'BASE TABLE'

2025/08/16 11:12:56 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324 SLOW SQL >= 200ms
[236.409ms] [rows:0] CREATE TABLE `categories` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`name` varchar(100) NOT NULL,`slug` varchar(100) NOT NULL,`description` text,`is_active` boolean DEFAULT true,PRIMARY KEY (`id`),INDEX `idx_categories_deleted_at` (`deleted_at`),INDEX `idx_categories_name` (`name`),UNIQUE INDEX `idx_categories_slug` (`slug`))

2025/08/16 11:12:56 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[2.868ms] [rows:-] SELECT DATABASE()

2025/08/16 11:12:56 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[6.682ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'gorm_test%' ORDER BY SCHEMA_NAME='gorm_test' DESC,SCHEMA_NAME limit 1

2025/08/16 11:12:56 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[6.389ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'gorm_test' AND table_name = 'posts' AND table_type = 'BASE TABLE'

2025/08/16 11:12:57 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324 SLOW SQL >= 200ms
[748.665ms] [rows:0] CREATE TABLE `posts` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`title` varchar(200) NOT NULL,`slug` varchar(200) NOT NULL,`content` text NOT NULL,`excerpt` varchar(500),`status` varchar(20) DEFAULT 'draft',`view_count` bigint DEFAULT 0,`like_count` bigint DEFAULT 0,`published_at` datetime(3) NULL,`author_id` bigint unsigned NOT NULL,`category_id` bigint unsigned,PRIMARY KEY (`id`),INDEX `idx_posts_category_id` (`category_id`),INDEX `idx_posts_deleted_at` (`deleted_at`),INDEX `idx_posts_title` (`title`),UNIQUE INDEX `idx_posts_slug` (`slug`),INDEX `idx_posts_status` (`status`),INDEX `idx_posts_published_at` (`published_at`),INDEX `idx_posts_author_id` (`author_id`),CONSTRAINT `fk_posts_author` FOREIGN KEY (`author_id`) REFERENCES `users`(`id`),CONSTRAINT `fk_categories_posts` FOREIGN KEY (`category_id`) REFERENCES `categories`(`id`) ON DELETE SET NULL ON UPDATE CASCADE)

2025/08/16 11:12:57 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[3.820ms] [rows:-] SELECT DATABASE()

2025/08/16 11:12:57 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[6.325ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'gorm_test%' ORDER BY SCHEMA_NAME='gorm_test' DESC,SCHEMA_NAME limit 1

2025/08/16 11:12:57 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[7.038ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'gorm_test' AND table_name = 'tags' AND table_type = 'BASE TABLE'

2025/08/16 11:12:57 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324 SLOW SQL >= 200ms
[302.942ms] [rows:0] CREATE TABLE `tags` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`name` varchar(50) NOT NULL,`slug` varchar(50) NOT NULL,`description` text,`color` varchar(7) DEFAULT '#007bff',`is_active` boolean DEFAULT true,PRIMARY KEY (`id`),INDEX `idx_tags_deleted_at` (`deleted_at`),UNIQUE INDEX `idx_tags_name` (`name`),UNIQUE INDEX `idx_tags_slug` (`slug`))

2025/08/16 11:12:57 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[2.518ms] [rows:-] SELECT DATABASE()

2025/08/16 11:12:57 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[7.153ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'gorm_test%' ORDER BY SCHEMA_NAME='gorm_test' DESC,SCHEMA_NAME limit 1

2025/08/16 11:12:57 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[7.917ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'gorm_test' AND table_name = 'post_tags' AND table_type = 'BASE TABLE'

2025/08/16 11:12:57 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324 SLOW SQL >= 200ms
[307.389ms] [rows:0] CREATE TABLE `post_tags` (`post_id` bigint unsigned,`tag_id` bigint unsigned,`created_at` datetime(3) NULL,PRIMARY KEY (`post_id`,`tag_id`),CONSTRAINT `fk_post_tags_tag` FOREIGN KEY (`tag_id`) REFERENCES `tags`(`id`),CONSTRAINT `fk_post_tags_post` FOREIGN KEY (`post_id`) REFERENCES `posts`(`id`))

2025/08/16 11:12:57 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[3.045ms] [rows:-] SELECT DATABASE()

2025/08/16 11:12:57 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[7.416ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'gorm_test%' ORDER BY SCHEMA_NAME='gorm_test' DESC,SCHEMA_NAME limit 1

2025/08/16 11:12:57 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324
[9.164ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'gorm_test' AND table_name = 'comments' AND table_type = 'BASE TABLE'

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:324 SLOW SQL >= 200ms
[343.286ms] [rows:0] CREATE TABLE `comments` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`content` text NOT NULL,`status` varchar(20) DEFAULT 'pending',`ip_address` varchar(45),`post_id` bigint unsigned NOT NULL,`author_id` bigint unsigned NOT NULL,`parent_id` bigint unsigned,PRIMARY KEY (`id`),INDEX `idx_comments_deleted_at` (`deleted_at`),INDEX `idx_comments_status` (`status`),INDEX `idx_comments_post_id` (`post_id`),INDEX `idx_comments_author_id` (`author_id`),INDEX `idx_comments_parent_id` (`parent_id`),CONSTRAINT `fk_comments_author` FOREIGN KEY (`author_id`) REFERENCES `users`(`id`),CONSTRAINT `fk_comments_replies` FOREIGN KEY (`parent_id`) REFERENCES `comments`(`id`),CONSTRAINT `fk_posts_comments` FOREIGN KEY (`post_id`) REFERENCES `posts`(`id`) ON DELETE CASCADE ON UPDATE CASCADE)
数据库连接成功 - 类型: mysql
✓ MySQL数据库初始化完成

=== MySQL 关联关系演示 ===

=== 一对一关系练习 ===

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:369
[9.024ms] [rows:1] INSERT INTO `profiles` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`first_name`,`last_name`,`bio`,`avatar`,`phone`,`address`,`birth_date`) VALUES ('2025-08-16 11:12:58.174','2025-08-16 11:12:58.174',NULL,1,'Alice','Smith','我是Alice，一名开发者','','','',NULL) ON DUPLICATE KEY UPDATE `user_id`=VALUES(`user_id`)

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:369
[45.833ms] [rows:1] INSERT INTO `users` (`created_at`,`updated_at`,`deleted_at`,`username`,`email`,`password`) VALUES ('2025-08-16 11:12:58.165','2025-08-16 11:12:58.165',NULL,'alice','alice@example.com','password123')
创建用户及资料成功，用户ID: 1, 资料ID: 1

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:369
[50.079ms] [rows:1] INSERT INTO `profiles` (`created_at`,`updated_at`,`deleted_at`,`user_id`,`first_name`,`last_name`,`bio`,`avatar`,`phone`,`address`,`birth_date`) VALUES ('2025-08-16 11:12:58.223','2025-08-16 11:12:58.223',NULL,2,'Bob','Johnson','我是Bob，喜欢写作','','','',NULL) ON DUPLICATE KEY UPDATE `user_id`=VALUES(`user_id`)

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:369
[120.129ms] [rows:1] INSERT INTO `users` (`created_at`,`updated_at`,`deleted_at`,`username`,`email`,`password`) VALUES ('2025-08-16 11:12:58.213','2025-08-16 11:12:58.213',NULL,'bob','bob@example.com','password456')
创建用户及资料成功，用户ID: 2, 资料ID: 2

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:393
[6.077ms] [rows:1] SELECT * FROM `profiles` WHERE `profiles`.`user_id` = 1 AND `profiles`.`deleted_at` IS NULL

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:393
[10.970ms] [rows:1] SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL ORDER BY `users`.`id` LIMIT 1
用户: alice, 全名: Alice Smith

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:412
[75.968ms] [rows:1] UPDATE `profiles` SET `bio`='我是Alice，一名全栈开发者',`phone`='123-456-7890',`updated_at`='2025-08-16 11:12:58.343' WHERE user_id = 1 AND `profiles`.`deleted_at` IS NULL
更新用户资料成功，影响行数: 1

=== 一对多关系练习 ===

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:463
[7.172ms] [rows:3] INSERT INTO `posts` (`created_at`,`updated_at`,`deleted_at`,`title`,`slug`,`content`,`excerpt`,`status`,`view_count`,`like_count`,`published_at`,`author_id`,`category_id`) VALUES ('2025-08-16 11:12:58.427','2025-08-16 11:12:58.427',NULL,'Go语言入门','tech-1','这是Go语言入门的内容','这是Go语言入门的摘要','published',0,0,NULL,1,1),('2025-08-16 11:12:58.427','2025-08-16 11:12:58.427',NULL,'GORM使用指南','tech-2','这是GORM使用指南的内容','这是GORM使用指南的摘要','published',0,0,NULL,1,1),('2025-08-16 11:12:58.427','2025-08-16 11:12:58.427',NULL,'数据库设计原则','tech-3','这是数据库设计原则的内容','这是数据库设计原则的摘要','published',0,0,NULL,1,1) ON DUPLICATE KEY UPDATE `category_id`=VALUES(`category_id`) 

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:463
[55.367ms] [rows:1] INSERT INTO `categories` (`created_at`,`updated_at`,`deleted_at`,`name`,`slug`,`description`,`is_active`) VALUES ('2025-08-16 11:12:58.419','2025-08-16 11:12:58.419',NULL,'技术','tech','',true)
创建分类及文章成功，分类ID: 1, 文章数量: 3

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:487
[6.935ms] [rows:1] SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:487
[23.284ms] [rows:3] SELECT * FROM `posts` WHERE `posts`.`category_id` = 1 AND `posts`.`deleted_at` IS NULL

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:487
[31.555ms] [rows:1] SELECT * FROM `categories` WHERE `categories`.`id` = 1 AND `categories`.`deleted_at` IS NULL ORDER BY `categories`.`id` LIMIT 1
分类: 技术, 文章数量: 3
  - Go语言入门 (作者: alice)
  - GORM使用指南 (作者: alice)
  - 数据库设计原则 (作者: alice)

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:556
[8.868ms] [rows:3] INSERT INTO `comments` (`created_at`,`updated_at`,`deleted_at`,`content`,`status`,`ip_address`,`post_id`,`author_id`,`parent_id`) VALUES ('2025-08-16 11:12:58.514','2025-08-16 11:12:58.514',NULL,'很有用的文章！','approved','',4,1,NULL),('2025-08-16 11:12:58.514','2025-08-16 11:12:58.514',NULL,'学到了很多','approved','',4,1,NULL),('2025-08-16 11:12:58.514','2025-08-16 11:12:58.514',NULL,'期待更多内容','approved','',4,1,NULL) ON DUPLICATE KEY UPDATE `post_id`=VALUES(`post_id`)

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:556
[55.878ms] [rows:1] INSERT INTO `posts` (`created_at`,`updated_at`,`deleted_at`,`title`,`slug`,`content`,`excerpt`,`status`,`view_count`,`like_count`,`published_at`,`author_id`,`category_id`) VALUES ('2025-08-16 11:12:58.507','2025-08-16 11:12:58.507',NULL,'GORM高级用法','post-1755313978','这是一篇关于GORM高级用法的文章...','这是一篇关于GORM高级用法的文章...','published',0,0,NULL,1,1)
创建文章及评论成功，文章ID: 4, 评论数量: 3

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:579
[6.970ms] [rows:1] SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:579
[24.291ms] [rows:3] SELECT * FROM `comments` WHERE `comments`.`post_id` = 4 AND `comments`.`deleted_at` IS NULL

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:579
[29.843ms] [rows:1] SELECT * FROM `posts` WHERE `posts`.`id` = 4 AND `posts`.`deleted_at` IS NULL ORDER BY `posts`.`id` LIMIT 1
文章: GORM高级用法, 评论数量: 3

=== 多对多关系练习 ===

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:613
[47.902ms] [rows:4] INSERT INTO `tags` (`created_at`,`updated_at`,`deleted_at`,`name`,`slug`,`description`,`color`,`is_active`) VALUES ('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'Go','Go','','#007bff',true),('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'数据库','数据库','','#007bff',true),('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'后端','后端','','#007bff',true),('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'教程','教程','','#007bff',true)

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:623
[9.218ms] [rows:1] SELECT * FROM `posts` WHERE `posts`.`id` = 1 AND `posts`.`deleted_at` IS NULL ORDER BY `posts`.`id` LIMIT 1

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[5.983ms] [rows:0] INSERT INTO `tags` (`created_at`,`updated_at`,`deleted_at`,`name`,`slug`,`description`,`color`,`is_active`,`id`) VALUES ('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'Go','Go','','#007bff',true,1),('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'数据库','数据库','','#007bff',true,2),('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'后端','后端','','#007bff',true,3),('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'教程','教程','','#007bff',true,4) ON DUPLICATE KEY UPDATE `id`=`id`     

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[6.200ms] [rows:4] INSERT INTO `post_tags` (`post_id`,`tag_id`) VALUES (1,1),(1,2),(1,3),(1,4) ON DUPLICATE KEY UPDATE `post_id`=`post_id`

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[59.162ms] [rows:1] UPDATE `posts` SET `updated_at`='2025-08-16 11:12:58.651' WHERE `posts`.`deleted_at` IS NULL AND `id` = 1

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:623
[7.693ms] [rows:1] SELECT * FROM `posts` WHERE `posts`.`id` = 2 AND `posts`.`deleted_at` IS NULL ORDER BY `posts`.`id` LIMIT 1

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[6.888ms] [rows:0] INSERT INTO `tags` (`created_at`,`updated_at`,`deleted_at`,`name`,`slug`,`description`,`color`,`is_active`,`id`) VALUES ('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'Go','Go','','#007bff',true,1),('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'数据库','数据库','','#007bff',true,2),('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'后端','后端','','#007bff',true,3),('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'教程','教程','','#007bff',true,4) ON DUPLICATE KEY UPDATE `id`=`id`     

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[13.983ms] [rows:4] INSERT INTO `post_tags` (`post_id`,`tag_id`) VALUES (2,1),(2,2),(2,3),(2,4) ON DUPLICATE KEY UPDATE `post_id`=`post_id`

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[56.368ms] [rows:1] UPDATE `posts` SET `updated_at`='2025-08-16 11:12:58.717' WHERE `posts`.`deleted_at` IS NULL AND `id` = 2

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:623
[7.461ms] [rows:1] SELECT * FROM `posts` WHERE `posts`.`id` = 3 AND `posts`.`deleted_at` IS NULL ORDER BY `posts`.`id` LIMIT 1

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[7.923ms] [rows:0] INSERT INTO `tags` (`created_at`,`updated_at`,`deleted_at`,`name`,`slug`,`description`,`color`,`is_active`,`id`) VALUES ('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'Go','Go','','#007bff',true,1),('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'数据库','数据库','','#007bff',true,2),('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'后端','后端','','#007bff',true,3),('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'教程','教程','','#007bff',true,4) ON DUPLICATE KEY UPDATE `id`=`id`     

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[7.309ms] [rows:4] INSERT INTO `post_tags` (`post_id`,`tag_id`) VALUES (3,1),(3,2),(3,3),(3,4) ON DUPLICATE KEY UPDATE `post_id`=`post_id`

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[47.977ms] [rows:1] UPDATE `posts` SET `updated_at`='2025-08-16 11:12:58.783' WHERE `posts`.`deleted_at` IS NULL AND `id` = 3

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:623
[5.727ms] [rows:1] SELECT * FROM `posts` WHERE `posts`.`id` = 4 AND `posts`.`deleted_at` IS NULL ORDER BY `posts`.`id` LIMIT 1

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[6.864ms] [rows:0] INSERT INTO `tags` (`created_at`,`updated_at`,`deleted_at`,`name`,`slug`,`description`,`color`,`is_active`,`id`) VALUES ('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'Go','Go','','#007bff',true,1),('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'数据库','数据库','','#007bff',true,2),('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'后端','后端','','#007bff',true,3),('2025-08-16 11:12:58.592','2025-08-16 11:12:58.592',NULL,'教程','教程','','#007bff',true,4) ON DUPLICATE KEY UPDATE `id`=`id`     

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[6.166ms] [rows:4] INSERT INTO `post_tags` (`post_id`,`tag_id`) VALUES (4,1),(4,2),(4,3),(4,4) ON DUPLICATE KEY UPDATE `post_id`=`post_id`

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:630
[48.498ms] [rows:1] UPDATE `posts` SET `updated_at`='2025-08-16 11:12:58.838' WHERE `posts`.`deleted_at` IS NULL AND `id` = 4
创建标签并分配成功，标签数量: 4

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:652
[5.428ms] [rows:4] SELECT * FROM `post_tags` WHERE `post_tags`.`post_id` = 1

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:652
[6.028ms] [rows:4] SELECT * FROM `tags` WHERE `tags`.`id` IN (1,2,3,4) AND `tags`.`deleted_at` IS NULL

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:652
[17.275ms] [rows:1] SELECT * FROM `posts` WHERE `posts`.`id` = 1 AND `posts`.`deleted_at` IS NULL ORDER BY `posts`.`id` LIMIT 1
文章: Go语言入门, 标签: Go, 数据库, 后端, 教程

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:672
[4.852ms] [rows:4] SELECT * FROM `post_tags` WHERE `post_tags`.`tag_id` = 1

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:672
[8.265ms] [rows:1] SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:672
[16.977ms] [rows:4] SELECT * FROM `posts` WHERE `posts`.`id` IN (1,2,3,4) AND `posts`.`deleted_at` IS NULL

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:672
[26.595ms] [rows:1] SELECT * FROM `tags` WHERE `tags`.`id` = 1 AND `tags`.`deleted_at` IS NULL ORDER BY `tags`.`id` LIMIT 1
标签: Go, 文章数量: 4

=== 复杂查询练习 ===

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:754
[6.719ms] [rows:1] SELECT * FROM `profiles` WHERE `profiles`.`user_id` = 1 AND `profiles`.`deleted_at` IS NULL

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:754
[14.346ms] [rows:1] SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:754
[7.278ms] [rows:1] SELECT * FROM `categories` WHERE `categories`.`id` = 1 AND `categories`.`deleted_at` IS NULL

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:754
[6.778ms] [rows:1] SELECT * FROM `users` WHERE `users`.`id` = 1 AND `users`.`deleted_at` IS NULL

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:754
[13.835ms] [rows:3] SELECT * FROM `comments` WHERE `comments`.`post_id` IN (1,2,3,4) AND `comments`.`deleted_at` IS NULL

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:754
[5.979ms] [rows:16] SELECT * FROM `post_tags` WHERE `post_tags`.`post_id` IN (1,2,3,4)

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:754
[7.926ms] [rows:4] SELECT * FROM `tags` WHERE `tags`.`id` IN (1,2,3,4) AND `tags`.`deleted_at` IS NULL

2025/08/16 11:12:58 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:754
[57.579ms] [rows:4] SELECT * FROM `posts` WHERE `posts`.`deleted_at` IS NULL LIMIT 5
获取到 4 篇文章（包含所有关联数据）

2025/08/16 11:12:59 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:773
[6.631ms] [rows:1] SELECT * FROM `categories` WHERE `categories`.`id` = 1 AND `categories`.`deleted_at` IS NULL

2025/08/16 11:12:59 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:773
[8.035ms] [rows:16] SELECT * FROM `post_tags` WHERE `post_tags`.`post_id` IN (1,2,3,4)

2025/08/16 11:12:59 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:773
[6.793ms] [rows:4] SELECT * FROM `tags` WHERE `tags`.`id` IN (1,2,3,4) AND `tags`.`deleted_at` IS NULL

2025/08/16 11:12:59 F:/Study/GO/Gorm/gorm/gorm-note/code/04_unit_exercises/level2/level2_associations.go:773
[28.874ms] [rows:4] SELECT * FROM `posts` WHERE author_id = 1 AND `posts`.`deleted_at` IS NULL
用户 alice 的文章统计:
  总文章数: 4
  总浏览数: 0
  总点赞数: 0
  分类分布: map[技术:4]
  标签分布: map[Go:4 后端:4 教程:4 数据库:4]

=== MySQL 关联关系演示完成 ===

=== Level 2 关联关系练习完成 ===