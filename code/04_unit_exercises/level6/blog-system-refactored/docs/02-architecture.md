# æ¶æ„è®¾è®¡ä¸æŠ€æœ¯æ ˆ ğŸ—ï¸

## ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ ğŸ¯

æœ¬åšå®¢ç³»ç»Ÿé‡‡ç”¨ç°ä»£åŒ–çš„åˆ†å±‚æ¶æ„è®¾è®¡ï¼ŒåŸºäº Go è¯­è¨€å’Œ Gin æ¡†æ¶æ„å»ºï¼Œéµå¾ª RESTful API è®¾è®¡åŸåˆ™ï¼Œå…·å¤‡é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€æ˜“æ‰©å±•çš„ç‰¹ç‚¹ã€‚

## æ•´ä½“æ¶æ„å›¾ ğŸ“Š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å®¢æˆ·ç«¯å±‚                              â”‚
â”‚                   (Web/Mobile/API)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      è´Ÿè½½å‡è¡¡å±‚                              â”‚
â”‚                   (Nginx/HAProxy)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨æœåŠ¡å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   å®ä¾‹ 1     â”‚ â”‚   å®ä¾‹ 2     â”‚ â”‚   å®ä¾‹ N     â”‚           â”‚
â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚           â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚           â”‚
â”‚  â”‚ â”‚Handlers â”‚ â”‚ â”‚ â”‚Handlers â”‚ â”‚ â”‚ â”‚Handlers â”‚ â”‚           â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚           â”‚
â”‚  â”‚ â”‚Services â”‚ â”‚ â”‚ â”‚Services â”‚ â”‚ â”‚ â”‚Services â”‚ â”‚           â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚           â”‚
â”‚  â”‚ â”‚Repositoryâ”‚ â”‚ â”‚ â”‚Repositoryâ”‚ â”‚ â”‚ â”‚Repositoryâ”‚ â”‚           â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å­˜å‚¨å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   MySQL     â”‚ â”‚   Redis     â”‚ â”‚ File Storageâ”‚           â”‚
â”‚  â”‚  (ä¸»æ•°æ®åº“)  â”‚ â”‚   (ç¼“å­˜)     â”‚ â”‚  (æ–‡ä»¶å­˜å‚¨)  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€æœ¯æ ˆè¯¦è§£ ğŸ› ï¸

### åç«¯æŠ€æœ¯æ ˆ

#### æ ¸å¿ƒæ¡†æ¶
- **Go 1.23.0**
  - é«˜æ€§èƒ½ç¼–è¯‘å‹è¯­è¨€
  - åŸç”Ÿå¹¶å‘æ”¯æŒ
  - ä¸°å¯Œçš„æ ‡å‡†åº“
  - å¿«é€Ÿç¼–è¯‘å’Œéƒ¨ç½²

- **Gin Web Framework**
  - è½»é‡çº§ HTTP æ¡†æ¶
  - é«˜æ€§èƒ½è·¯ç”±
  - ä¸­é—´ä»¶æ”¯æŒ
  - JSON ç»‘å®šå’ŒéªŒè¯

#### æ•°æ®åº“æŠ€æœ¯
- **GORM v2**
  - Go è¯­è¨€ ORM æ¡†æ¶
  - æ”¯æŒå¤šç§æ•°æ®åº“
  - è‡ªåŠ¨è¿ç§»
  - å…³è”æŸ¥è¯¢
  - è½¯åˆ é™¤æ”¯æŒ

- **MySQL 8.0+**
  - ä¸»è¦ç”Ÿäº§æ•°æ®åº“
  - ACID äº‹åŠ¡æ”¯æŒ
  - é«˜æ€§èƒ½æŸ¥è¯¢
  - ä¸»ä»å¤åˆ¶

- **SQLite 3**
  - å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒ
  - é›¶é…ç½®
  - æ–‡ä»¶æ•°æ®åº“
  - è½»é‡çº§éƒ¨ç½²

#### è®¤è¯ä¸å®‰å…¨
- **JWT (JSON Web Token)**
  - æ— çŠ¶æ€è®¤è¯
  - è·¨åŸŸæ”¯æŒ
  - å®‰å…¨ä»¤ç‰Œä¼ è¾“

- **bcrypt**
  - å¯†ç å“ˆå¸ŒåŠ å¯†
  - ç›å€¼è‡ªåŠ¨ç”Ÿæˆ
  - é˜²å½©è™¹è¡¨æ”»å‡»

#### ä¸­é—´ä»¶æŠ€æœ¯
- **CORS (è·¨åŸŸèµ„æºå…±äº«)**
  - æ”¯æŒè·¨åŸŸè¯·æ±‚
  - å®‰å…¨ç­–ç•¥é…ç½®

- **Rate Limiting**
  - è¯·æ±‚é¢‘ç‡é™åˆ¶
  - é˜²æ­¢ DDoS æ”»å‡»
  - åŸºäºä»¤ç‰Œæ¡¶ç®—æ³•

### å¼€å‘å·¥å…·é“¾

#### åŒ…ç®¡ç†
- **Go Modules**
  - ä¾èµ–ç‰ˆæœ¬ç®¡ç†
  - æ¨¡å—åŒ–å¼€å‘
  - è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶

#### ä»£ç è´¨é‡
- **gofmt**ï¼šä»£ç æ ¼å¼åŒ–
- **golint**ï¼šä»£ç è§„èŒƒæ£€æŸ¥
- **go vet**ï¼šé™æ€åˆ†æå·¥å…·
- **go test**ï¼šå•å…ƒæµ‹è¯•æ¡†æ¶

## åˆ†å±‚æ¶æ„è®¾è®¡ ğŸ›ï¸

### æ¶æ„å±‚æ¬¡è¯´æ˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Presentation Layer                      â”‚
â”‚                      (è¡¨ç°å±‚)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Handlers   â”‚ â”‚ Middleware  â”‚ â”‚   Routes    â”‚           â”‚
â”‚  â”‚ HTTPå¤„ç†å™¨   â”‚ â”‚   ä¸­é—´ä»¶     â”‚ â”‚   è·¯ç”±é…ç½®   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Business Layer                          â”‚
â”‚                      (ä¸šåŠ¡å±‚)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  Services                           â”‚   â”‚
â”‚  â”‚                 ä¸šåŠ¡é€»è¾‘æœåŠ¡                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Persistence Layer                        â”‚
â”‚                      (æŒä¹…å±‚)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Repository  â”‚ â”‚   Models    â”‚ â”‚  Database   â”‚           â”‚
â”‚  â”‚  æ•°æ®è®¿é—®    â”‚ â”‚  æ•°æ®æ¨¡å‹    â”‚ â”‚   æ•°æ®åº“     â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1. è¡¨ç°å±‚ (Presentation Layer)

#### Handlers (å¤„ç†å™¨)
- **èŒè´£**ï¼šå¤„ç† HTTP è¯·æ±‚å’Œå“åº”
- **åŠŸèƒ½**ï¼š
  - è¯·æ±‚å‚æ•°è§£æå’ŒéªŒè¯
  - è°ƒç”¨ä¸šåŠ¡é€»è¾‘æœåŠ¡
  - å“åº”æ ¼å¼åŒ–
  - é”™è¯¯å¤„ç†

```go
// ç¤ºä¾‹ï¼šç”¨æˆ·å¤„ç†å™¨
type UserHandler struct {
    userService services.UserService
}

func (h *UserHandler) CreateUser(c *gin.Context) {
    var req CreateUserRequest
    if err := c.ShouldBindJSON(&req); err != nil {
        c.JSON(400, ErrorResponse{Message: "å‚æ•°é”™è¯¯"})
        return
    }
    
    user, err := h.userService.CreateUser(req)
    if err != nil {
        c.JSON(500, ErrorResponse{Message: err.Error()})
        return
    }
    
    c.JSON(201, SuccessResponse{Data: user})
}
```

#### Middleware (ä¸­é—´ä»¶)
- **èŒè´£**ï¼šè¯·æ±‚é¢„å¤„ç†å’Œåå¤„ç†
- **åŠŸèƒ½**ï¼š
  - èº«ä»½è®¤è¯å’Œæˆæƒ
  - è·¨åŸŸå¤„ç†
  - è¯·æ±‚æ—¥å¿—è®°å½•
  - é™æµä¿æŠ¤
  - é”™è¯¯æ¢å¤

```go
// ç¤ºä¾‹ï¼šJWT è®¤è¯ä¸­é—´ä»¶
func AuthRequired() gin.HandlerFunc {
    return func(c *gin.Context) {
        token := c.GetHeader("Authorization")
        if token == "" {
            c.JSON(401, ErrorResponse{Message: "æœªæˆæƒè®¿é—®"})
            c.Abort()
            return
        }
        
        userID, err := validateToken(token)
        if err != nil {
            c.JSON(401, ErrorResponse{Message: "ä»¤ç‰Œæ— æ•ˆ"})
            c.Abort()
            return
        }
        
        c.Set("user_id", userID)
        c.Next()
    }
}
```

#### Routes (è·¯ç”±)
- **èŒè´£**ï¼šAPI è·¯ç”±é…ç½®å’Œç®¡ç†
- **åŠŸèƒ½**ï¼š
  - RESTful API è®¾è®¡
  - è·¯ç”±åˆ†ç»„
  - ä¸­é—´ä»¶é…ç½®
  - ç‰ˆæœ¬ç®¡ç†

### 2. ä¸šåŠ¡å±‚ (Business Layer)

#### Services (æœåŠ¡)
- **èŒè´£**ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘å®ç°
- **åŠŸèƒ½**ï¼š
  - ä¸šåŠ¡è§„åˆ™éªŒè¯
  - æ•°æ®å¤„ç†å’Œè½¬æ¢
  - è·¨æ¨¡å—åè°ƒ
  - äº‹åŠ¡ç®¡ç†

```go
// ç¤ºä¾‹ï¼šç”¨æˆ·æœåŠ¡æ¥å£
type UserService interface {
    CreateUser(req CreateUserRequest) (*User, error)
    GetUserByID(id uint) (*User, error)
    UpdateUser(id uint, req UpdateUserRequest) (*User, error)
    DeleteUser(id uint) error
    ListUsers(params ListParams) (*ListResponse, error)
}

// ç”¨æˆ·æœåŠ¡å®ç°
type userService struct {
    userRepo repository.UserRepository
}

func (s *userService) CreateUser(req CreateUserRequest) (*User, error) {
    // ä¸šåŠ¡é€»è¾‘éªŒè¯
    if err := s.validateUserData(req); err != nil {
        return nil, err
    }
    
    // å¯†ç åŠ å¯†
    hashedPassword, err := bcrypt.GenerateFromPassword([]byte(req.Password), bcrypt.DefaultCost)
    if err != nil {
        return nil, err
    }
    
    // åˆ›å»ºç”¨æˆ·
    user := &User{
        Username:     req.Username,
        Email:        req.Email,
        PasswordHash: string(hashedPassword),
        Status:       UserStatusActive,
    }
    
    return s.userRepo.Create(user)
}
```

### 3. æŒä¹…å±‚ (Persistence Layer)

#### Repository (ä»“å‚¨)
- **èŒè´£**ï¼šæ•°æ®è®¿é—®æŠ½è±¡
- **åŠŸèƒ½**ï¼š
  - æ•°æ®åº“æ“ä½œå°è£…
  - æŸ¥è¯¢ä¼˜åŒ–
  - äº‹åŠ¡ç®¡ç†
  - ç¼“å­˜é›†æˆ

```go
// ç¤ºä¾‹ï¼šç”¨æˆ·ä»“å‚¨æ¥å£
type UserRepository interface {
    Create(user *User) (*User, error)
    GetByID(id uint) (*User, error)
    GetByEmail(email string) (*User, error)
    Update(user *User) (*User, error)
    Delete(id uint) error
    List(params ListParams) ([]*User, int64, error)
}

// ç”¨æˆ·ä»“å‚¨å®ç°
type userRepository struct {
    db *gorm.DB
}

func (r *userRepository) Create(user *User) (*User, error) {
    if err := r.db.Create(user).Error; err != nil {
        return nil, err
    }
    return user, nil
}
```

#### Models (æ¨¡å‹)
- **èŒè´£**ï¼šæ•°æ®ç»“æ„å®šä¹‰
- **åŠŸèƒ½**ï¼š
  - æ•°æ®åº“è¡¨æ˜ å°„
  - å…³è”å…³ç³»å®šä¹‰
  - æ•°æ®éªŒè¯
  - æ¨¡å‹æ–¹æ³•

## API è®¾è®¡åŸåˆ™ ğŸ”Œ

### RESTful API è®¾è®¡

#### èµ„æºå‘½åè§„èŒƒ
- ä½¿ç”¨åè¯å¤æ•°å½¢å¼ï¼š`/users`ã€`/posts`ã€`/comments`
- å±‚çº§å…³ç³»è¡¨ç¤ºï¼š`/posts/{id}/comments`
- é¿å…åŠ¨è¯ï¼šä½¿ç”¨ HTTP æ–¹æ³•è¡¨ç¤ºæ“ä½œ

#### HTTP æ–¹æ³•ä½¿ç”¨
- `GET`ï¼šè·å–èµ„æº
- `POST`ï¼šåˆ›å»ºèµ„æº
- `PUT`ï¼šå®Œæ•´æ›´æ–°èµ„æº
- `PATCH`ï¼šéƒ¨åˆ†æ›´æ–°èµ„æº
- `DELETE`ï¼šåˆ é™¤èµ„æº

#### çŠ¶æ€ç è§„èŒƒ
- `200 OK`ï¼šè¯·æ±‚æˆåŠŸ
- `201 Created`ï¼šèµ„æºåˆ›å»ºæˆåŠŸ
- `400 Bad Request`ï¼šè¯·æ±‚å‚æ•°é”™è¯¯
- `401 Unauthorized`ï¼šæœªæˆæƒ
- `403 Forbidden`ï¼šç¦æ­¢è®¿é—®
- `404 Not Found`ï¼šèµ„æºä¸å­˜åœ¨
- `500 Internal Server Error`ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯

### API ç‰ˆæœ¬ç®¡ç†

```
/api/v1/users          # ç‰ˆæœ¬ 1
/api/v2/users          # ç‰ˆæœ¬ 2
```

### å“åº”æ ¼å¼æ ‡å‡†åŒ–

```json
// æˆåŠŸå“åº”
{
  "success": true,
  "data": {
    "id": 1,
    "username": "john_doe",
    "email": "john@example.com"
  },
  "message": "æ“ä½œæˆåŠŸ"
}

// é”™è¯¯å“åº”
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "å‚æ•°éªŒè¯å¤±è´¥",
    "details": [
      {
        "field": "email",
        "message": "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"
      }
    ]
  }
}

// åˆ†é¡µå“åº”
{
  "success": true,
  "data": [
    // æ•°æ®åˆ—è¡¨
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 100,
    "pages": 5
  }
}
```

## æ•°æ®æµå‘ ğŸ”„

### è¯·æ±‚å¤„ç†æµç¨‹

```
1. HTTP Request
   â†“
2. Middleware Chain
   â”œâ”€â”€ CORS
   â”œâ”€â”€ Logger
   â”œâ”€â”€ Recovery
   â”œâ”€â”€ RateLimit
   â””â”€â”€ Auth
   â†“
3. Router
   â†“
4. Handler
   â”œâ”€â”€ å‚æ•°éªŒè¯
   â”œâ”€â”€ è°ƒç”¨ Service
   â””â”€â”€ å“åº”æ ¼å¼åŒ–
   â†“
5. Service
   â”œâ”€â”€ ä¸šåŠ¡é€»è¾‘
   â”œâ”€â”€ æ•°æ®éªŒè¯
   â””â”€â”€ è°ƒç”¨ Repository
   â†“
6. Repository
   â”œâ”€â”€ æ•°æ®åº“æ“ä½œ
   â”œâ”€â”€ ç¼“å­˜å¤„ç†
   â””â”€â”€ è¿”å›ç»“æœ
   â†“
7. HTTP Response
```

### é”™è¯¯å¤„ç†æµç¨‹

```
Error Occurred
   â†“
Error Wrapping
   â†“
Error Logging
   â†“
Error Response
   â”œâ”€â”€ é”™è¯¯ç 
   â”œâ”€â”€ é”™è¯¯ä¿¡æ¯
   â””â”€â”€ è¯¦ç»†ä¿¡æ¯
```

## æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ âš¡

### æ•°æ®åº“ä¼˜åŒ–
- **ç´¢å¼•ä¼˜åŒ–**ï¼šä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
- **æŸ¥è¯¢ä¼˜åŒ–**ï¼šä½¿ç”¨ GORM çš„é¢„åŠ è½½åŠŸèƒ½
- **è¿æ¥æ± **ï¼šé…ç½®åˆé€‚çš„æ•°æ®åº“è¿æ¥æ± 
- **è¯»å†™åˆ†ç¦»**ï¼šä¸»ä»æ•°æ®åº“åˆ†ç¦»

### ç¼“å­˜ç­–ç•¥
- **Redis ç¼“å­˜**ï¼šçƒ­ç‚¹æ•°æ®ç¼“å­˜
- **æŸ¥è¯¢ç¼“å­˜**ï¼šå¤æ‚æŸ¥è¯¢ç»“æœç¼“å­˜
- **ä¼šè¯ç¼“å­˜**ï¼šç”¨æˆ·ä¼šè¯ä¿¡æ¯ç¼“å­˜

### å¹¶å‘å¤„ç†
- **Goroutine**ï¼šåˆ©ç”¨ Go çš„å¹¶å‘ç‰¹æ€§
- **Channel**ï¼šå®‰å…¨çš„æ•°æ®ä¼ é€’
- **Context**ï¼šè¯·æ±‚ä¸Šä¸‹æ–‡ç®¡ç†

## å®‰å…¨è®¾è®¡ ğŸ”’

### è®¤è¯æˆæƒ
- **JWT ä»¤ç‰Œ**ï¼šæ— çŠ¶æ€è®¤è¯
- **è§’è‰²æƒé™**ï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **ä»¤ç‰Œåˆ·æ–°**ï¼šå®‰å…¨çš„ä»¤ç‰Œæ›´æ–°æœºåˆ¶

### æ•°æ®å®‰å…¨
- **å¯†ç åŠ å¯†**ï¼šbcrypt å“ˆå¸ŒåŠ å¯†
- **SQL æ³¨å…¥é˜²æŠ¤**ï¼šGORM å‚æ•°åŒ–æŸ¥è¯¢
- **XSS é˜²æŠ¤**ï¼šè¾“å…¥æ•°æ®éªŒè¯å’Œè½¬ä¹‰

### ç½‘ç»œå®‰å…¨
- **HTTPS**ï¼šåŠ å¯†ä¼ è¾“
- **CORS**ï¼šè·¨åŸŸå®‰å…¨ç­–ç•¥
- **é™æµ**ï¼šé˜²æ­¢ DDoS æ”»å‡»

## å¯æ‰©å±•æ€§è®¾è®¡ ğŸ“ˆ

### æ°´å¹³æ‰©å±•
- **æ— çŠ¶æ€è®¾è®¡**ï¼šæ”¯æŒå¤šå®ä¾‹éƒ¨ç½²
- **è´Ÿè½½å‡è¡¡**ï¼šè¯·æ±‚åˆ†å‘
- **å¾®æœåŠ¡æ¶æ„**ï¼šæ¨¡å—åŒ–æ‹†åˆ†

### å‚ç›´æ‰©å±•
- **èµ„æºä¼˜åŒ–**ï¼šå†…å­˜å’Œ CPU ä½¿ç”¨ä¼˜åŒ–
- **ç®—æ³•ä¼˜åŒ–**ï¼šæé«˜å¤„ç†æ•ˆç‡
- **ç¼“å­˜ä¼˜åŒ–**ï¼šå‡å°‘æ•°æ®åº“å‹åŠ›

## ç›‘æ§ä¸æ—¥å¿— ğŸ“Š

### æ—¥å¿—ç³»ç»Ÿ
- **ç»“æ„åŒ–æ—¥å¿—**ï¼šJSON æ ¼å¼æ—¥å¿—
- **æ—¥å¿—çº§åˆ«**ï¼šDEBUGã€INFOã€WARNã€ERROR
- **æ—¥å¿—è½®è½¬**ï¼šè‡ªåŠ¨æ—¥å¿—æ–‡ä»¶ç®¡ç†

### ç›‘æ§æŒ‡æ ‡
- **æ€§èƒ½æŒ‡æ ‡**ï¼šå“åº”æ—¶é—´ã€ååé‡
- **é”™è¯¯æŒ‡æ ‡**ï¼šé”™è¯¯ç‡ã€å¼‚å¸¸ç»Ÿè®¡
- **ä¸šåŠ¡æŒ‡æ ‡**ï¼šç”¨æˆ·æ´»è·ƒåº¦ã€å†…å®¹ç»Ÿè®¡

## éƒ¨ç½²æ¶æ„ ğŸš€

### å¼€å‘ç¯å¢ƒ
```
Developer Machine
â”œâ”€â”€ Go Application (SQLite)
â”œâ”€â”€ Local Testing
â””â”€â”€ Hot Reload
```

### æµ‹è¯•ç¯å¢ƒ
```
Test Server
â”œâ”€â”€ Go Application
â”œâ”€â”€ MySQL Database
â”œâ”€â”€ Redis Cache
â””â”€â”€ Automated Testing
```

### ç”Ÿäº§ç¯å¢ƒ
```
Production Cluster
â”œâ”€â”€ Load Balancer (Nginx)
â”œâ”€â”€ Application Servers (Multiple Instances)
â”œâ”€â”€ Database Cluster (MySQL Master/Slave)
â”œâ”€â”€ Cache Cluster (Redis)
â””â”€â”€ File Storage (Object Storage)
```

---

**æ³¨æ„**ï¼šæœ¬æ¶æ„è®¾è®¡æ”¯æŒä»å•æœºéƒ¨ç½²åˆ°åˆ†å¸ƒå¼é›†ç¾¤çš„å¹³æ»‘æ‰©å±•ï¼Œå¯æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„éƒ¨ç½²æ–¹æ¡ˆã€‚